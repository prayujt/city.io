FROM golang:1.19 as backend

WORKDIR /app/src

ENV MYSQL_USER $MYSQL_USER_ARG
ENV MYSQL_PASSWORD $MYSQL_PASSWORD_ARG
ENV MYSQL_DB_NAME $MYSQL_DB_NAME_ARG
ENV MYSQL_TEST_DB_NAME $MYSQL_TEST_DB_NAME_ARG
ENV MYSQL_HOST $MYSQL_HOST_ARG
ENV API_PORT $API_PORT_ARG
ENV API_HOST $API_HOST_ARG

COPY ./ ./

RUN go build -o /app/src/build/

EXPOSE 8000

CMD ["build/api"]
